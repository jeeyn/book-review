## 제5장 스마트 스피커: 시리는 쓸모 있는 비서가 될 수 있을까

```
< Discussion >
우리 집 클로바 저도 5년째 아주 잘 쓰고 있는데요. 최근 GPT가 등장하면서부터는 얘가 상대적으로 바보같이 느껴지기도 합니다.

1. 스마트 스피커를 얼마나 스마트하게 쓰고 계신가요? 실제 주로 사용하는 기능(날씨, 알람, 음악 등)이나, 잘 사용하는 팁 등을 공유해보면 어떨까요?

2. 그리고 앞으로 스마트 스피커가 어떤 방향으로 진화할 수 있을지에 대해서도 이야기 해보고 싶습니다. GPT, Gemini 와 같은 대화형 인공지능과의 차별성은 어떻게 찾을 수 있을까요?
```

#### 인공지능 비서의 탄생

- 스마트 스피커는 어느 날 갑자기 하늘에서 뚝 떨어진 기술이 아니다. 핵심 콘셉트와 기술들(에이전트 기반의 아키텍처, 자연어 이해, 온톨로지 등)은 수십 년 간 연구되었고, 마침내 기술이 무르익어 하나의 제품으로 탄생되었다.
- 특히, 음성인식의 영역을 처음으로 개척한 애플 `시리(Siri)`의 업적이 크다. 시리는 음성인식이라는 개념을 대중화했다.

#### 애플 시리, 음성인식 비서의 시대를 열다

- 원래 시리는 스탠퍼드대학교에서 시작된 민간 연구소 SRI 인터내셔널의 연구 프로젝트였다. 그러다 가능성을 본 일부 연구원이 독립해 스타트업을 세웠다.
  - 2009년 즈음 시리는 텍스트를 입력하면 텍스트로 응답하는 챗봇에 가까웠다. 이 정도로는 시장에서 반응을 얻기 힘들겠다고 판단한 이사회는 출시를 1년 연기하고 음성인식 기능을 도입했다.
- 시리는 2010년에 아이폰 앱으로 출시된다. 출시 후 폭발적인 인기를 끌었고, 출시 두 달여 만에 애플에서 인수한다.
  - 인수 후 1년이 지난 2011년 10월 4일, 시리는 아이폰 4S에 정식 탑재되어 출시됐다. 애플은 시리를 아이폰의 핵심 기능으로 소개했다.
  - 그러나 바로 다음 날 시리 팀에 각별한 관심을 가졌던 스티브 잡스가 사망했고, 이후 시리 품질에 대한 비판, 애플의 폐쇄적인 운영 정책, 시리 팀과 애플 경영진과의 갈등으로 시리 팀 초창기 멤버 대부분이 애플을 떠났다.
- 시리 팀 초창기 멤버들은 애플을 떠난 후 2012년 `비브랩스(Viv Labs)`를 설립해 인공지능 개인 비서를 개발했다.
  - 2016년, 삼성에서 이 회사를 인수하여 `빅스비(Bixby)`가 탄생한다.

#### 아마존 알렉사, 스마트 스피커의 시대를 열다

- 2014년, 아마존은 세계 최초의 스마트 스피커 `에코(Echo)`를 출시했다. 오늘날 에코는 전 세계에 1억 대가 넘게 팔린 베스트 셀러이며, 미국 가정에 있는 스마트 스피커의 약 70%를 차치한다.
- 에코의 호출어 `알렉사(Alexa)`는 인류의 지식과 배움의 중심지였던 고대 이집트 '알렉산드리아' 도서관의 오마주다.

#### 스마트 스피커는 어떻게 말을 알아들을까?

- 스마트 스피커가 사람의 말을 알아듣는 과정은 음성을 녹음하여 서버로 보내 분석하는 과정이고, 사람에게 말을 하는 기능은 녹음된 음성을 서버에서 받아와 재생하는 것이다.
  > `웨이크업(Wake-Up)`<br/>
  > 호출어로 스피커를 부르면 반응하며 깨어나는 것. 웨이크업 이후부터 사용자가 질문하거나 요청하면 이를 녹음하여 서버로 전송한다.
- 스마트 스피커에는 추가 기능 없이 딱 웨이크업 단어만 알아들을 수 있는 조그만 음성인식 엔진이 내장되어 있다.
- 녹음된 음성 파일이 서버로 전송된 이후에는 거대한 서버 시스템이 이를 분석한다.
  - 이 시스템은 각각의 기능에 따라 크게 다음과 같이 구분된다.
    - 이해 : 음성인식 + 자연어 이해
    - 실행 : 다이얼로그 매니저 + 스킬
    - 생성 : 자연어 생성 + 음성 합성

#### 사람의 목소리를 알아듣는 음성인식 과정

- 컴퓨터 입장에서는 음성 언어의 가변성과 음성 자체에 내재하는 소음 등 여러 이유로 음성인식이 문자인식보다 훨씬 더 까다롭다.
- 음성인식은 한 마디로 시간의 흐름에 따라 역동적으로 변하는 음성의 파형을 다루는 일이다.
- 과거에는 소리의 최소 단위인 음소가 결합하여 단어와 구문을 만드는 규칙을 언어학자들이 분석해 if-then 규칙으로 프로그래밍했다.
  - 음성의 파형에서 음소 인식 > 음소의 고유한 배열을 기반으로 단어 인식
  - 그러나 음성의 극단적인 유연함은 도저히 규칙으로 정리할 수 없었고, 이 방식은 곧 한계에 부딪혔다.

#### 음향 모델, 음성의 파형에서 단어를 인식하다

- 다르파는 1971년부터 5년간 음성인식 기술을 겨루는 개발 대회를 주최하고 참가팀들에게 연구 기금을 적극적으로 지원했다.
  - 자율주행차의 역사가 시작되는데도 큰 역할을 했던 다르파의 재등장
- 규칙 기반보다 통계 기반 음성인식이 더 좋은 성능을 낼 것으로 생각한 연구자들이 1970년대 중반부터 `은닉 마르코프 모델(Hidden Markov Model)`\* 방법을 응용하기 시작했는데, 이를 적용한 결과 규칙 기반보다 훨씬 더 좋은 성능을 보였다.
  > \* `은닉 마르코프 모델(Hidden Markov Model)`<br/>
  > 은닉된 상태와 관찰 가능한 결과로 구성된 통계적 모델
- 그러나 2010년 무렵까지도 음성인식은 15% 정도의 오류율이 있었는데, 딥러닝이 이미지 인식 분야에서 좋은 성과를 내기 시작하자, 마찬가지로 음성 파형이라는 방대하고 복잡한 데이터를 다루는 음성인식 분야에서도 인공신경망 모델을 통해 성능을 향상시킬 수 있게 되었다. 뿐만 아니라 순환 신경망\* 구조도 고안해낸다.
  > `순환 신경망(RNN; Recurrent Neural Network)`<br/>
  > 시간의 흐름에 따라 순서대로 구성되는 시계열 형식도 학습 가능한 신공 신경망 구조<br/> > `음향 모델(Acoustic Model)`<br/>
  > 딥러닝과 빅데이터를 이용해 음성의 파형으로 단어를 인식하는 모델

#### 언어 모델, 오인식 단어를 보정하다

- 사람의 뇌는 정보의 일부분만 인지하더라도 패턴의 변하지 않는 특징을 정확하게 감지해낸다. (ex. 캐리커쳐) 이는 언어를 이해할 때도 작동한다. 잘못 알아들은 단어도 상식에 기반해 보정해서 이해한다.
  - 이것이 `언어 모델(Language Model)`의 역할이다. 음성을 잘못 인식하더라도 그동안의 학습 결과를 토대로 사용할 확률이 높은 단어로 보정해준다.
  - a.k.a. 개떡같이 말해도 찰떡같이 알아듣기
- 언어 모델은 우리가 일상에서 자주 쓰는 문장에서 출현하는 단어의 확률을 학습한다. 보통은 책이나 뉴스의 문장으로 학습해서 많이 나오는 단어일수록 더 높은 점수를 부여한다.

#### 자연어 이해, 언어를 이해하다

> `자연어 이해(NLU; Natural Language Understanding)`<br/>
> 말이나 글의 의미가 무엇인지 알 수 있도록 언어를 구조화하여 처리하는 과정<br/>

1. 도메인 분류 : 스피커가 텍스트 문장을 감지하면 먼저 도메인\*을 구분한다.<br/>
   > \* 스마트 스피커에 적용되는 기술이 아직 표준화된 것은 아니라, 각 스피커마다 이를 지칭하는 용어가 다르다. '도메인'은 스마트 스피커를 가장 먼저 출시한 아마존에서 사용하는 용어
2. 인텐트 분류 : 도메인을 분류한 이후에는 사용자의 의도(인텐트)를 파악하여 분류한다.
3. 슬롯 필링(Slot Filling) : 필요 시 누락된 정보를 채운다. 자동으로 정보를 채우기도 하고, 어려운 경우 추가 질문을 하기도 한다.
   > `멀티 턴(Multi-Turn)`<br/>
   > 여러 번의 대화. 누락된 정보(슬롯)을 채우기 위해 사람과 대화를 이어나가면서 필요한 정보를 얻는 것

#### 다이얼로그 매니저, 명령을 실행하다

- 다이얼로그 매니저의 역할은 하나에 국한되지 않는다.
  - 멀티 턴 과정에서 내화 내용을 기억해두거나, 궁금한 내용을 외부 지식 기반 서비스에 연결하여 찾아보거나
  - 무엇보다 여러 도메인에 맞춰 적절한 행동을 수행하도록 명령을 내리는 역할을 한다. 스킬\*은 스스로 작동하지 않는다. 반드시 다이얼로그가 개입하고 판단하여 스킬에 명령을 내려야 한다. (ex. 음악 재생, 날씨 조회 등)
    > \* `스킬(Skill)` : 멜론 같은 여러 서비스를 이용하는 기능

#### 자연어 생성, 대화를 디자인하다

- 스마트 스피커는 문제 해결용 대화 시스템이므로 자유로운 대화보다는 목적에 맞는 대화에 방점을 맞춘다.
  - 그래서 자유롭게 대화를 생성하지 않고 정해진 템플릿에 정보를 채워서 문장을 생성하는 방법을 주로 사용한다.
  - 식상하지 않고 풍부한 대화를 위해 템플릿은 다양하게 구성한다. 이러한 작업을 '대화를 디자인한다' 고 한다.

#### 연결 합성, 문장을 자연스럽게 읽을 수 있을까?

> `연결합성, USS(Unit Selection Synthesis)`<br/>
> 미리 녹음된 음성을 기준에 따라 잘게 쪼개어 음편(Unit)을 만들고 가장 적합한 음편을 선택(Selection)하여 음성을 합성(Synthesis)하는 방식. 원음을 그대로 사용하므로 음질이 매우 자연스럽다는 장점이 있다.

- 스마트 스피커는 템플릿을 기반으로 제한된 문장을 생성하기 때문에 제한된 음성만 재생하면 된다. 그래서 아직까지는 성우가 녹음한 소리가 품질이 가장 좋다.

#### 음성 합성, 인간보다 더 자연스러움을 향해

- 기존에는 정해진 문장을 녹음하고 단순히 필요한 단어들을 조합하여 문장을 만들었다면, 딥러닝을 이용한 음성 학습은 성우가 몇 시간동안 자유롭게 녹음한 데이터를 학습해 어떤 문장이든 성우 목소리를 기반으로 합성해낸다는 차이가 있다.
- 말의 음조와 리듬을 조절하는 운율 역시 의미를 전달하기 때문에 영혼 없는 기계의 목소리처럼 들리지 않도록 하는 것이 매우 중요하다.
  - 구글이 제안하고 엔비디아에서 구현한 `타코트론2(Tacotron2)`는 사람과 구분하기 어려울 정도로 자연스러운 음성을 합성해낸다.
- 음성 합성 과정은 크게 두 단계로 요약할 수 있다.

  1. 텍스트 → 멜 스펙트로그램
  2. 멜 스펙트로그램 → 음성

  > `멜 스펙트로그램(Mel Spectrogram)` : 소리나 파동을 시각화하여 파악할 수 있도록 표현한 것. 음파와 비슷하게 생겼지만 색상의 차이, 농도를 포함해 더욱 풍부한 정보를 표현할 수 있으며, 이를 인간이 인지 가능한 주파수 대역으로 변환해 낮은 해상도로 압축한 것<br/>

  > `보코더(Vocoder)`<br/>
  > 멜 스펙트로그램을 실제 음성으로 바꾸는 기술. 얼마나 노이즈 없이 깨끗하고 선명한 음질을 생성할 수 있는지가 이 기술의 핵심

---

#### Comment

- (p.209-214) 시리에서 빅스비까지 이어진 사연이 매우 흥미로웠다.
- (p.220-221) 주요 기술들이 태동하는데 중요한 역할을 하며 계속 등장하는 '다르파'에 호기심이 생겨 좀 더 알아보았다.
  > `다르파(DARPA; Defense Advanced Research Projects Agency)`<br/>
  > 미국 국방부에 소속된 미군 관련 기술 연구개발기관<br/>
  - 인터넷(알파넷), 마우스, 전자레인지, GPS, 탄소섬유, 수술로봇, 드론, 자율주행차, 음성인식 등 세상을 바꾼 많은 기술들 중 상당수가 다르파의 전폭적인 지원과 개발에 의해 탄생되었다고 한다.
  - 실패하더라도 과감한 주제, 실패했더라도 과정에 집중하는 지향점이 멋있다.
  - 최근에는 암, 당뇨, 알츠하이머와 같은 고난이도 질병 치료와 달 인프라 구축을 통한 우주경제 실현, 인공지능 강화, 생태계 혁신을 위한 첨단 소재 등에 집중하고 있다고 하는데 다르파의 연구 주제를 통해 가까운 미래에 대한 상상력을 키워볼 수 있었다.
  - 한국형 다르파를 도입하고자 노력 중. 다르파의 운영 방식과 기술 개발 사이클을 보면 상당히 혁신적인데 국내 환경에 맞추어 벤치마킹이 가능할지
  - [[참고] DARPA Programs](https://www.darpa.mil/research/programs)
  - [[참고] 인터넷·GPS·드론이 탄생한 곳, DARPA는 어떻게 혁신적 연구조직의 전설이 되었는가?](https://www.taejaefci.org/research/633)
  - [[참고] 미래 기술의 설계자 다르파](https://magazine.securities.miraeasset.com/contents.php?idx=1406)
- (p.239) 자율주행 분야에서도 그랬듯, 인공지능이 사람의 의견을 '인식'하는 영역과 사람에게 새로운 의견을 '제시'하는 영역에서의 정확도는 수치적으로는 미미해 보일 지라도, 영향력에서 어마무시하게 큰 차이가 있다. 같은 서비스를 개발하더라도 이 두 가지 영역 중 어디에서 일/연구하느냐에 따른 차이를 관찰해보는 것도 재미있겠다.
